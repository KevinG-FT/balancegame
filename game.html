<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balancing Market Game</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        .game-controls { position: absolute; top: 10px; left: 10px; display: flex; flex-direction: column; gap: 10px; }
        .status-timer { margin-top: 10px; text-align: left; }
        .game-container { margin: 20px auto; width: 80%; max-width: 600px; text-align: center; }
        .meter { width: 100%; background: linear-gradient(to right, red, yellow 20%, green 40%, green 60%, yellow 80%, red); height: 30px; position: relative; margin: 20px 0; border: 1px solid black; border-radius: 5px; }
        .frequency-arrow { position: absolute; top: -10px; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid black; transform: translateX(-50%); }
        .frequency-value { margin-top: 50px; font-weight: bold; font-size: 40px; }
        .battery-container { margin-top: 20px; width: 50px; height: 150px; border: 2px solid black; border-radius: 10px; position: relative; display: inline-block; }
        .battery-soc { position: absolute; bottom: 0; width: 100%; background: blue; transition: height 0.2s; }
        .critical-line { position: absolute; left: 0; width: 100%; height: 2px; background: red; }
        .critical-line.low { bottom: 10%; }
        .critical-line.high { bottom: 90%; }
        .battery-info { margin-top: 10px; font-weight: bold; display: flex; flex-direction: column; align-items: center; }
        .controls { margin-top: 20px; display: flex; justify-content: space-between; }
        .column { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .button { padding: 10px 20px; margin: 5px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .button:disabled { background-color: #aaa; cursor: not-allowed; }
        .status { font-size: 1.2em; }
        .timer { font-size: 1.5em; font-weight: bold; }
        .revenue { margin-top: 10px; font-size: 1.2em; font-weight: bold; }
        .loss-message, .battery-warning { margin-top: 10px; font-size: 1.2em; color: red; font-weight: bold; }
    </style>
</head>
<body>
    <div class="game-controls">
        <button id="startGame" class="button">Start Game</button>
        <button id="pauseGame" class="button" disabled>Pause Game</button>
        <button id="restartGame" class="button">Restart Game</button>
        <div class="status-timer">
            <div id="status" class="status">Status: Stable</div>
            <div id="timer" class="timer">Time Left: 3:00</div>
        </div>
    </div>
    <div class="game-container">
        <h1>Balancing Market Game</h1>
        <div class="meter">
            <div id="frequencyArrow" class="frequency-arrow"></div>
        </div>
        <div id="frequencyValue" class="frequency-value">50.00 Hz</div>
        <div class="battery-container">
            <div id="batterySoc" class="battery-soc" style="height: 50%;"></div>
            <div class="critical-line low"></div>
            <div class="critical-line high"></div>
        </div>
        <div class="battery-info">
            <div id="batteryLabel">50.0% State of Charge</div>
            <div id="cycleCount">Battery Cycles: 0</div>
        </div>
        <div class="controls">
            <div class="column">
                <button id="fcrDown" class="button">FCR-D Down (<span id="fcrDownCount">4</span>)</button>
                <button id="charge" class="button">Charge Battery</button>
            </div>
            <div class="column">
                <button id="fcrN" class="button">Toggle FCR-N</button>
                <button id="ffr" class="button">FFR (<span id="ffrCount">4</span>)</button>
            </div>
            <div class="column">
                <button id="fcrUp" class="button">FCR-D Up (<span id="fcrUpCount">4</span>)</button>
                <button id="discharge" class="button">Discharge Battery</button>
            </div>
        </div>
        <div id="revenue" class="revenue">Revenue: $0</div>
        <div id="batteryWarning" class="battery-warning"></div>
        <div id="lossMessage" class="loss-message"></div>
    </div>
    <script src="game_logic.js"></script>
</body>
</html>
